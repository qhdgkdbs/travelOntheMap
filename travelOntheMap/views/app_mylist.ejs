<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="UTF-8">

<title>ì½œëŸ¼ë²„ìŠ¤ ë§µ, ë‹¹ì‹ ì˜ ì—¬í–‰ì§€ë¥¼ ì°¾ìœ¼ì„¸ìš”!</title>

<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="Tooplate">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="shortcut icon" href="https://i.postimg.cc/d061bMYv/favicon-1.png" type="image/x-icon">
<link rel="icon" href="https://i.postimg.cc/d061bMYv/favicon-1.png" type="image/x-icon">

<link rel="stylesheet" href="stylesheets/bootstrap.min.css">
<link rel="stylesheet" href="stylesheets/animate.css">
<link rel="stylesheet" href="stylesheets/font-awesome.min.css">
<link rel="stylesheet" href="stylesheets/app_mylist_indexStyle.css">

<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>


<!-- Main css -->
<link rel="stylesheet" href="stylesheets/mylist_tooplate-style.css">

</head>
<body data-spy="scroll" data-target=".navbar-collapse" data-offset="50">

<!-- PRE LOADER -->
<div class="preloader">
     <div class="spinner">
          <span class="spinner-rotate"></span>
     </div>
</div>


<!-- HOME SECTION -->

     <nav>
          <a href="https://itjusttravel.herokuapp.com/appcolumbus">ì½œëŸ¼ë²„ìŠ¤ ë§µğŸš€</a>
          <a href="https://forms.gle/2poSfTFw2fu5du6x8">ì—¬í–‰ì§€ ì œë³´ğŸ‘ğŸ»</a>
          <div id="indicator"></div>
     </nav>



<!-- WORK SECTION -->
<section id="work" class="parallax-section">
     <div class="container">
          <div class="row">

               <div class="col-md-12 col-sm-12">
                    <!-- SECTION TITLE -->
                    <div class="wow fadeInUp section-title" data-wow-delay="0.1s">
                         <h2>ë‚˜ì˜, ì—¬í–‰ì§€ë“¤</h2>
                         <p>ë¡œê·¸ì¸ ê¸°ëŠ¥ì„ ì´ìš©í•˜ì§€ ì•Šì•„, ê°™ì€ ë¸Œë¼ìš°ì ¸ë¡œ ì ‘ì†ì‹œì—ë§Œ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!<br>ì–¸ì  ê°€ ë– ë‚  ê·¸ ê³³ì„ ì €ì¥í•´ë‘¬ìš”,<br>ìµœëŒ€ 20ê³³ë§Œ ì €ì¥í•  ìˆ˜ ìˆìœ¼ë‹ˆ ì‹ ì¤‘íˆ ì €ì¥í•´ìš”ğŸ™ˆ</p>
                    </div>
               </div>
               <!-- WORK THUMB -->
               <div id = "recomandedSpot"></div>

          </div>
     </div>
</section>


<!-- SCRIPTS -->
<script>
     // var urlAdd = "http://localhost:3000/"  
     var urlAdd = "https://itjusttravel.herokuapp.com/"


     var output = localStorage.getItem("key");		
     var myListArr = []
     myListArr=JSON.parse(output);

     var dataList;
     var htmlData = "";

     $.ajax({
          url :  urlAdd + 'file/',
          dataType :"json", // ë°ì´í„°íƒ€ì…ì„ json ìœ¼ë¡œ ë°›ì•„ì˜´
          success : function(data) {
               // alert("dataë¡œë”©ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.")
               dataList = data;
               setContent(); 
               // $('#loading').hide();  
          },
          error : function(e) {
               console.log(e.responseText);
               console.log(e);
          }
     })


     var setContent = function() {
          // console.log(dataList)
          // if(!myListArr)myListArr=[0]

          var content = `<div class="card">`

          for(var target of dataList){
               if(myListArr){
                    //ë‚˜ì˜ ì—¬í–‰ì§€ê°€ ìˆì„ê²½ìš°
                    if(myListArr.includes(target._id)){

                         isitSavedImg = "https://i.postimg.cc/sgQGXBGD/icon-18.png";

                         content = content +      
                              `
                              <div class="wow fadeInUp col-md-3 col-sm-6 " data-wow-delay="0.1s">               
                                   <div class="work-thumb" style="border-bottom: 1px solid cadetblue; text-align: center; ">
                                        <div>
                                             <a href="${target.moreLink}" class="image-popup">
                                                  <img src="${target.picLink}" class="img-responsive" alt="Fine Arts" style = "margin: 0 auto;">
                                             </a>
                                        <span onclick='saveOrDeleteRedirect("${target._id}")' style = "margin-bottom:5px;text-align:right;position:relative; top:-25px;"><img class= "isItSavedImg" src="${isitSavedImg}" alt="heelo" width="20" height="20" ></span>

                                        </div>
                                        <a href="${target.moreLink}" class = "recomandedSpotBox"><span style="color:white;">${target.spot}</span>ğŸš€</a>
                                        <div style="margin: 10px;">${target.des}</div>
                                   </div>
                              </div>
                              ` 
                    }  
               }else{
                    // ë‚˜ì˜ ì—¬í–‰ì§€ê°€ í•œ ê³³ë„ ì—†ì„ ê²½ìš°.
                    break;
               }
          }
     
          if(myListArr.length === 0){
               content = content +      
                    `
                    <div class="wow fadeInUp col-md-3 col-sm-6" data-wow-delay="0.1s">               
                         <div class="work-thumb" style = "margin-bottom:0px;">
                              <div>ì €ì¥ëœ ë‚˜ì˜ ì—¬í–‰ì§€ê°€ ì—†ìŠµë‹ˆë‹¤..</div>
                         </div>
                    </div>
                    ` 
          }

          htmlData = htmlData + content +`</div>`        

          $("#recomandedSpot").html(htmlData)
     } 

     function saveOrDeleteRedirect(id){
          var output = localStorage.getItem("key");		
          var myListArr = [0];
          if(output){
               myListArr = JSON.parse(output);
          }
          
          //íŒì—…ìœ¼ë¡œ ë‹¤ì‹œí•œë²ˆ ë¬¼ì–´ë³´ê¸°
          var r = confirm("ë‚˜ì˜ ì—¬í–‰ì§€ì—ì„œ ì‚­ì œ í•˜ì‹œê² ì–´ìš”?");
          if (r == true) {
               //ì‚­ì œ + ì €ì¥
               myListArr.splice(myListArr.indexOf(id),1)
               localStorage.setItem("key", JSON.stringify(myListArr));
               location.reload()
          } else {
          
          }
          
          // window.location.href =urlAdd;
     }


</script>
<script src="js/jquery.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.parallax.js"></script>
<script src="js/smoothscroll.js"></script>
<script src="js/wow.min.js"></script>
<script src="js/custom.js"></script>

</body>
</html>